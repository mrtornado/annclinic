---
import { getCollection } from "astro:content";
import BaseLayout from "../../layouts/BaseLayout.astro";
import AllServicesListing from "../../components/services/AllServicesListing.tsx";
import ServicesSection from "../../components/home/ServicesSection.tsx";
import ComingSoonSection from "../../components/home/ComingSoonSection.tsx";
import ServicesSearch from "../../components/services/ServicesSearch.tsx";
import AnimatedText from "../../components/magic-ui/AnimatedText.tsx";
import FloatingParticles from "../../components/magic-ui/FloatingParticles.tsx";
import { getImage } from "astro:assets";
import { siteConfig } from "../../config/site";
import bgImage from "../../assets/images/bg-image.jpg";
import welcomeImage from "../../assets/images/welcome.webp";

// Import service images - toate serviciile cu imagini corecte
import medicinaFamilieImg from "../../assets/images/servicii/fam-scaled.jpg";
import pediatrieImg from "../../assets/images/servicii/pediatrrie.png";
import medicinaInternaImg from "../../assets/images/servicii/medicina-interna.jpg";
import chirurgieGeneralaImg from "../../assets/images/servicii/chirurgie.png";
import chirurgiePediatricaImg from "../../assets/images/servicii/CHIRURGIE-PEDIATRICA.png";
import obstetricaGinecologieImg from "../../assets/images/servicii/ginecologie.png";
import ortopedieTraumatologieImg from "../../assets/images/servicii/orto.png";
import nefrologieImg from "../../assets/images/servicii/nefrologie.png";
import analizeLaboratorImg from "../../assets/images/servicii/medicina-muncii.jpg";
import dermatovenerologieImg from "../../assets/images/servicii/dermatologie.png";
import medicinaMunciiImg from "../../assets/images/servicii/medicina-muncii.jpg";
import neurologieImg from "../../assets/images/servicii/medicina-muncii.jpg";
import esteticaImg from "../../assets/images/servicii/chirurgie.png";

// Coming soon service images
import reumatologieImgSoon from "../../assets/images/servicii/soon/reumatologie.jpg";
import pneumologieImgSoon from "../../assets/images/servicii/soon/pneumologie.png";
import endocrinologieImgSoon from "../../assets/images/servicii/soon/endocrinologie.png";
import psihiatrieImgSoon from "../../assets/images/servicii/soon/psihiatrie.jpg";
import recuperareMedicalaImgSoon from "../../assets/images/servicii/soon/RECUPERARE-MEDICALA.png";
import alergologieImgSoon from "../../assets/images/servicii/soon/alergologie.png";
import ortopediePediatricaImgSoon from "../../assets/images/servicii/soon/ORTOPEDIE-PEDIATRICA.png";
import cardiologieImgSoon from "../../assets/images/servicii/soon/cardiologie.png";
import orlImgSoon from "../../assets/images/servicii/soon/ORL.png";
import oftalmologieImgSoon from "../../assets/images/servicii/soon/oftamologie.jpg";
import urologieImgSoon from "../../assets/images/servicii/soon/UROLOGIE.png";

// Get all services content
const services = await getCollection("services");

// Filter out hidden services and sort by order and then by name
const sortedServices = services
  .filter((service) => service.data.hidden !== true)
  .sort((a, b) => {
    if (a.data.order !== b.data.order) {
      return a.data.order - b.data.order;
    }
    return a.data.name.localeCompare(b.data.name);
  });

// Optimize service images - disponibile acum
const medicinaFamilieOptimized = await getImage({
  src: medicinaFamilieImg,
  format: "webp",
  quality: 85,
  width: 400,
  height: 300,
});

const pediatrieOptimized = await getImage({
  src: pediatrieImg,
  format: "webp",
  quality: 85,
  width: 400,
  height: 300,
});

const medicinaInternaOptimized = await getImage({
  src: medicinaInternaImg,
  format: "webp",
  quality: 85,
  width: 400,
  height: 300,
});

const chirurgieGeneralaOptimized = await getImage({
  src: chirurgieGeneralaImg,
  format: "webp",
  quality: 85,
  width: 400,
  height: 300,
});

const chirurgiePediatricaOptimized = await getImage({
  src: chirurgiePediatricaImg,
  format: "webp",
  quality: 85,
  width: 400,
  height: 300,
});

const obstetricaGinecologieOptimized = await getImage({
  src: obstetricaGinecologieImg,
  format: "webp",
  quality: 85,
  width: 400,
  height: 300,
});

const ortopedieTraumatologieOptimized = await getImage({
  src: ortopedieTraumatologieImg,
  format: "webp",
  quality: 85,
  width: 400,
  height: 300,
});

const nefrologieOptimized = await getImage({
  src: nefrologieImg,
  format: "webp",
  quality: 85,
  width: 400,
  height: 300,
});

const analizeLaboratorOptimized = await getImage({
  src: analizeLaboratorImg,
  format: "webp",
  quality: 85,
  width: 400,
  height: 300,
});

const dermatovenerologieOptimized = await getImage({
  src: dermatovenerologieImg,
  format: "webp",
  quality: 85,
  width: 400,
  height: 300,
});

const medicinaMunciiOptimized = await getImage({
  src: medicinaMunciiImg,
  format: "webp",
  quality: 85,
  width: 400,
  height: 300,
});

const esteticaOptimized = await getImage({
  src: esteticaImg,
  format: "webp",
  quality: 85,
  width: 400,
  height: 300,
});

const neurologieOptimized = await getImage({
  src: neurologieImg,
  format: "webp",
  quality: 85,
  width: 400,
  height: 300,
});

// Optimize coming soon service images
const reumatologieOptimized = await getImage({
  src: reumatologieImgSoon,
  format: "webp",
  quality: 85,
  width: 400,
  height: 300,
});

const pneumologieOptimized = await getImage({
  src: pneumologieImgSoon,
  format: "webp",
  quality: 85,
  width: 400,
  height: 300,
});

const endocrinologieOptimized = await getImage({
  src: endocrinologieImgSoon,
  format: "webp",
  quality: 85,
  width: 400,
  height: 300,
});

const psihiatrieOptimized = await getImage({
  src: psihiatrieImgSoon,
  format: "webp",
  quality: 85,
  width: 400,
  height: 300,
});

const recuperareMedicalaOptimized = await getImage({
  src: recuperareMedicalaImgSoon,
  format: "webp",
  quality: 85,
  width: 400,
  height: 300,
});

const alergologieOptimized = await getImage({
  src: alergologieImgSoon,
  format: "webp",
  quality: 85,
  width: 400,
  height: 300,
});

const ortopediePediatricaOptimized = await getImage({
  src: ortopediePediatricaImgSoon,
  format: "webp",
  quality: 85,
  width: 400,
  height: 300,
});

const cardiologieOptimized = await getImage({
  src: cardiologieImgSoon,
  format: "webp",
  quality: 85,
  width: 400,
  height: 300,
});

const orlOptimized = await getImage({
  src: orlImgSoon,
  format: "webp",
  quality: 85,
  width: 400,
  height: 300,
});

const oftalmologieOptimized = await getImage({
  src: oftalmologieImgSoon,
  format: "webp",
  quality: 85,
  width: 400,
  height: 300,
});

const urologieOptimized = await getImage({
  src: urologieImgSoon,
  format: "webp",
  quality: 85,
  width: 400,
  height: 300,
});

const serviceImages = {
  // Servicii disponibile acum
  "medicina-familie": {
    src: medicinaFamilieOptimized.src,
    width: 400,
    height: 300,
  },
  pediatrie: { src: pediatrieOptimized.src, width: 400, height: 300 },
  "medicina-interna": {
    src: medicinaInternaOptimized.src,
    width: 400,
    height: 300,
  },
  "chirurgie-generala": {
    src: chirurgieGeneralaOptimized.src,
    width: 400,
    height: 300,
  },
  "chirurgie-pediatrica": {
    src: chirurgiePediatricaOptimized.src,
    width: 400,
    height: 300,
  },
  "obstetrica-ginecologie": {
    src: obstetricaGinecologieOptimized.src,
    width: 400,
    height: 300,
  },
  "ortopedie-traumatologie": {
    src: ortopedieTraumatologieOptimized.src,
    width: 400,
    height: 300,
  },
  nefrologie: { src: nefrologieOptimized.src, width: 400, height: 300 },
  "analize-laborator": {
    src: analizeLaboratorOptimized.src,
    width: 400,
    height: 300,
  },
  dermatovenerologie: {
    src: dermatovenerologieOptimized.src,
    width: 400,
    height: 300,
  },
  "medicina-muncii": {
    src: medicinaMunciiOptimized.src,
    width: 400,
    height: 300,
  },
  "estetica-faciala": { src: esteticaOptimized.src, width: 400, height: 300 },
  neurologie: { src: neurologieOptimized.src, width: 400, height: 300 },

  // Coming soon services
  reumatologie: { src: reumatologieOptimized.src, width: 400, height: 300 },
  pneumologie: { src: pneumologieOptimized.src, width: 400, height: 300 },
  endocrinologie: { src: endocrinologieOptimized.src, width: 400, height: 300 },
  psihiatrie: { src: psihiatrieOptimized.src, width: 400, height: 300 },
  "recuperare-medicala": {
    src: recuperareMedicalaOptimized.src,
    width: 400,
    height: 300,
  },
  alergologie: { src: alergologieOptimized.src, width: 400, height: 300 },
  "ortopedie-pediatrica": {
    src: ortopediePediatricaOptimized.src,
    width: 400,
    height: 300,
  },
  "diabet-metabolism": {
    src: endocrinologieOptimized.src,
    width: 400,
    height: 300,
  },

  // Servicii care sunt în coming soon dar au și pagină dedicată
  cardiologie: { src: cardiologieOptimized.src, width: 400, height: 300 },
  orl: { src: orlOptimized.src, width: 400, height: 300 },
  oftalmologie: { src: oftalmologieOptimized.src, width: 400, height: 300 },
  urologie: { src: urologieOptimized.src, width: 400, height: 300 },

  default: { src: medicinaFamilieOptimized.src, width: 400, height: 300 },
};

// SEO optimization for services page - targeting medical services in București
const seoTitle =
  "Servicii Medicale București - Clinică Medicală Completă | ANN Clinic";
const seoDescription =
  "Servicii medicale complete în București: cardiologie, dermatologie, ginecologie, pediatrie, neurologie, oftalmologie, ORL, urologie. Medici specializați și echipamente moderne la ANN Clinic Bragadiru.";

const keywords = [
  "servicii medicale București",
  "clinică medicală București",
  "consultații medicale București",
  "medici specialiști București",
  "investigații medicale București",
  "cardiolog București",
  "dermatolog București",
  "ginecolog București",
  "pediatru București",
  "neurolog București",
  "oftalmolog București",
  "urolog București",
  "ORL București",
  "clinică Bragadiru",
  "consultații medicale Bragadiru",
];

// Structured data for medical services
const structuredData = {
  "@context": "https://schema.org",
  "@type": "MedicalBusiness",
  name: "ANN Clinic - Servicii Medicale București",
  description: seoDescription,
  url: `${Astro.site}servicii`,
  address: {
    "@type": "PostalAddress",
    streetAddress: `${siteConfig.address.street} ${siteConfig.address.number}`,
    addressLocality: siteConfig.address.city,
    addressRegion: siteConfig.address.county,
    postalCode: siteConfig.address.postalCode,
    addressCountry: "RO",
  },
  telephone: siteConfig.contact.shortPhone,
  email: siteConfig.contact.email,
  openingHours: [
    `Mo-Fr ${siteConfig.schedule.weekdays}`,
    `Sa ${siteConfig.schedule.saturday}`,
  ],
  medicalSpecialty: services.map((service) => service.data.name),
  availableService: services.map((service) => ({
    "@type": "MedicalTherapy",
    name: service.data.name,
    description: service.data.description,
  })),
  areaServed: [
    {
      "@type": "City",
      name: "București",
    },
    {
      "@type": "City",
      name: "Bragadiru",
    },
    {
      "@type": "AdministrativeArea",
      name: "Ilfov",
    },
  ],
};
---

<BaseLayout
  title={seoTitle}
  description={seoDescription}
  keywords={keywords}
  structuredData={structuredData}
>
  <main class="min-h-screen">
    <!-- All Services Listing - Detailed Grid -->
    <AllServicesListing
      services={sortedServices}
      serviceImages={serviceImages}
      client:load
    />

    <!-- Search Services - Bottom -->
    <ServicesSearch services={sortedServices} variant="bottom" client:load />
  </main>
</BaseLayout>
