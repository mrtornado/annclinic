---
import { getCollection } from "astro:content";
import BaseLayout from "../../layouts/BaseLayout.astro";
import AllServicesListing from "../../components/services/AllServicesListing.tsx";
import { getImage } from "astro:assets";

// Import service images
import cardiologieImg from "../../assets/images/servicii/medicina-interna.jpg";
import dermatologieImg from "../../assets/images/servicii/dermatologie.png";
import ginecologieImg from "../../assets/images/servicii/ginecologie.png";
import pediatrieImg from "../../assets/images/servicii/pediatrrie.png";
import ortopedieImg from "../../assets/images/servicii/orto.png";
import orlImg from "../../assets/images/servicii/nefrologie.png";
import esteticaImg from "../../assets/images/servicii/chirurgie.png";
import neurologieImg from "../../assets/images/servicii/medicina-muncii.jpg";
import oftalmologieImg from "../../assets/images/servicii/orto.png";
import urologieImg from "../../assets/images/servicii/CHIRURGIE-PEDIATRICA.png";
import famImg from "../../assets/images/servicii/fam-scaled.jpg";

// Get all services content
const services = await getCollection("services");

// Sort services by order and then by name
const sortedServices = services.sort((a, b) => {
  if (a.data.order !== b.data.order) {
    return a.data.order - b.data.order;
  }
  return a.data.name.localeCompare(b.data.name);
});

// Optimize service images
const cardiologieOptimized = await getImage({
  src: cardiologieImg,
  format: "webp",
  quality: 85,
  width: 400,
  height: 300,
});

const dermatologieOptimized = await getImage({
  src: dermatologieImg,
  format: "webp",
  quality: 85,
  width: 400,
  height: 300,
});

const ginecologieOptimized = await getImage({
  src: ginecologieImg,
  format: "webp",
  quality: 85,
  width: 400,
  height: 300,
});

const pediatrieOptimized = await getImage({
  src: pediatrieImg,
  format: "webp",
  quality: 85,
  width: 400,
  height: 300,
});

const ortopedieOptimized = await getImage({
  src: ortopedieImg,
  format: "webp",
  quality: 85,
  width: 400,
  height: 300,
});

const orlOptimized = await getImage({
  src: orlImg,
  format: "webp",
  quality: 85,
  width: 400,
  height: 300,
});

const esteticaOptimized = await getImage({
  src: esteticaImg,
  format: "webp",
  quality: 85,
  width: 400,
  height: 300,
});

const neurologieOptimized = await getImage({
  src: neurologieImg,
  format: "webp",
  quality: 85,
  width: 400,
  height: 300,
});

const oftalmologieOptimized = await getImage({
  src: oftalmologieImg,
  format: "webp",
  quality: 85,
  width: 400,
  height: 300,
});

const urologieOptimized = await getImage({
  src: urologieImg,
  format: "webp",
  quality: 85,
  width: 400,
  height: 300,
});

const famOptimized = await getImage({
  src: famImg,
  format: "webp",
  quality: 85,
  width: 400,
  height: 300,
});

const serviceImages = {
  cardiologie: { src: cardiologieOptimized.src, width: 400, height: 300 },
  dermatologie: { src: dermatologieOptimized.src, width: 400, height: 300 },
  ginecologie: { src: ginecologieOptimized.src, width: 400, height: 300 },
  pediatrie: { src: pediatrieOptimized.src, width: 400, height: 300 },
  ortopedie: { src: ortopedieOptimized.src, width: 400, height: 300 },
  orl: { src: orlOptimized.src, width: 400, height: 300 },
  "estetica-faciala": { src: esteticaOptimized.src, width: 400, height: 300 },
  neurologie: { src: neurologieOptimized.src, width: 400, height: 300 },
  oftalmologie: { src: oftalmologieOptimized.src, width: 400, height: 300 },
  urologie: { src: urologieOptimized.src, width: 400, height: 300 },
  "medicina-familie": { src: famOptimized.src, width: 400, height: 300 },
  default: { src: famOptimized.src, width: 400, height: 300 },
};

// SEO optimization for services page - targeting medical services in București
const seoTitle =
  "Servicii Medicale București - Clinică Medicală Completă | ANN Clinic";
const seoDescription =
  "Servicii medicale complete în București: cardiologie, dermatologie, ginecologie, pediatrie, neurologie, oftalmologie, ORL, urologie. Medici specializați și echipamente moderne la ANN Clinic Bragadiru.";

const keywords = [
  "servicii medicale București",
  "clinică medicală București",
  "consultații medicale București",
  "medici specialiști București",
  "investigații medicale București",
  "cardiolog București",
  "dermatolog București",
  "ginecolog București",
  "pediatru București",
  "neurolog București",
  "oftalmolog București",
  "urolog București",
  "ORL București",
  "clinică Bragadiru",
  "consultații medicale Bragadiru",
];

// Structured data for medical services
const structuredData = {
  "@context": "https://schema.org",
  "@type": "MedicalBusiness",
  name: "ANN Clinic - Servicii Medicale București",
  description: seoDescription,
  url: `${Astro.site}servicii`,
  address: {
    "@type": "PostalAddress",
    streetAddress: "Strada Exemplu 123",
    addressLocality: "Bragadiru",
    addressRegion: "Ilfov",
    addressCountry: "RO",
  },
  telephone: "+40123456789",
  email: "contact@ann-clinic.ro",
  openingHours: ["Mo-Fr 08:00-20:00", "Sa 09:00-15:00"],
  medicalSpecialty: services.map((service) => service.data.name),
  availableService: services.map((service) => ({
    "@type": "MedicalTherapy",
    name: service.data.name,
    description: service.data.description,
  })),
  areaServed: [
    {
      "@type": "City",
      name: "București",
    },
    {
      "@type": "City",
      name: "Bragadiru",
    },
    {
      "@type": "AdministrativeArea",
      name: "Ilfov",
    },
  ],
};
---

<BaseLayout
  title={seoTitle}
  description={seoDescription}
  keywords={keywords}
  structuredData={structuredData}
>
  <main class="min-h-screen">
    <!-- Services Hero Section -->
    <section
      class="relative pt-24 pb-16 sm:pt-32 sm:pb-20 bg-gradient-to-br from-surface via-surface-secondary to-surface-tertiary overflow-hidden"
    >
      <!-- Background Effects -->
      <div class="absolute inset-0">
        <div
          class="absolute top-10 left-10 w-40 h-40 bg-primary/12 rounded-full blur-3xl hero-float"
        >
        </div>
        <div
          class="absolute top-1/3 right-20 w-32 h-32 bg-secondary/12 rounded-full blur-2xl hero-pulse"
          style="animation-delay: 1s"
        >
        </div>
        <div
          class="absolute bottom-20 left-1/4 w-48 h-48 bg-accent/12 rounded-full blur-3xl hero-glow"
          style="animation-delay: 2s"
        >
        </div>

        <!-- Medical Pattern -->
        <div class="absolute inset-0 opacity-8">
          <div
            class="absolute top-1/4 left-1/5 w-8 h-8 bg-primary/30 transform rotate-45 rounded-sm"
          >
          </div>
          <div
            class="absolute top-3/4 right-1/4 w-6 h-6 bg-secondary/30 transform rotate-45 rounded-sm"
          >
          </div>
          <div
            class="absolute top-1/2 left-2/3 w-4 h-4 bg-accent/30 transform rotate-45 rounded-sm"
          >
          </div>
        </div>

        <div
          class="absolute inset-0 bg-gradient-to-b from-surface/70 via-transparent to-surface/70"
        >
        </div>
      </div>

      <div class="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
        <div
          class="inline-flex items-center gap-3 bg-surface-elevated/80 backdrop-blur-md text-primary px-6 py-3 rounded-full text-sm font-medium mb-8 shadow-xl border border-primary/20"
        >
          <span class="text-xl">🏥</span>
          <span>Servicii Medicale Complete</span>
          <div class="flex gap-1">
            <div class="w-2 h-2 bg-primary rounded-full hero-pulse"></div>
            <div
              class="w-2 h-2 bg-secondary rounded-full hero-pulse"
              style="animation-delay: 0.5s"
            >
            </div>
            <div
              class="w-2 h-2 bg-accent rounded-full hero-pulse"
              style="animation-delay: 1s"
            >
            </div>
          </div>
        </div>

        <h1
          class="text-4xl sm:text-5xl lg:text-6xl font-bold text mb-8 leading-tight"
        >
          <span class="block mb-2">Servicii Medicale</span>
          <span
            class="bg-gradient-to-r from-primary via-secondary to-accent bg-clip-text text-transparent hero-gradient-flow"
          >
            București
          </span>
        </h1>

        <p
          class="text-lg sm:text-xl text-secondary max-w-4xl mx-auto leading-relaxed mb-12"
        >
          Descoperă gama completă de servicii medicale oferite de
          <span
            class="font-semibold text-primary bg-primary/10 px-2 py-1 rounded-lg"
          >
            specialiștii noștri experimentați
          </span>
          din București. De la consultații de rutină la investigații complexe, oferim
          îngrijire medicală de înaltă calitate cu tehnologie modernă.
        </p>

        <div
          class="flex flex-col sm:flex-row gap-4 sm:gap-6 justify-center items-center"
        >
          <a
            href="/programare"
            class="inline-flex items-center gap-3 bg-gradient-to-r from-primary to-secondary text-white px-8 py-4 rounded-full font-semibold hover:scale-105 transition-all duration-300 shadow-xl hover:shadow-2xl"
          >
            <span class="text-xl">📅</span>
            <span>Programează Consultație</span>
          </a>

          <a
            href="/contact"
            class="inline-flex items-center gap-3 border-2 border-primary text-primary px-8 py-4 rounded-full font-semibold hover:bg-primary hover:text-white transition-all duration-300"
          >
            <span class="text-xl">📞</span>
            <span>Contactează-ne</span>
          </a>
        </div>
      </div>
    </section>

    <!-- All Services Listing -->
    <AllServicesListing
      services={sortedServices}
      serviceImages={serviceImages}
      client:load
    />
  </main>
</BaseLayout>
