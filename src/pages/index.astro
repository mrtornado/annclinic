---
import BaseLayout from "../layouts/BaseLayout.astro";
import HeroSection from "../components/home/HeroSection.tsx";
import WelcomeSection from "../components/home/WelcomeSection.tsx";
import ServicesSection from "../components/home/ServicesSection.tsx";
import ComingSoonSection from "../components/home/ComingSoonSection.tsx";
import ArticlesSection from "../components/home/ArticlesSection.tsx";
import { getCollection } from "astro:content";
import { siteConfig } from "../config/site";
import { getImage } from "astro:assets";
import bgImage from "../assets/images/bg-image.jpg";
import welcomeImage from "../assets/images/welcome.webp";

// Import logos
import annLogo from "../assets/images/altfel-de-logo.png";
import synevoLogo from "../assets/images/synevo.png";

// Get services and articles data for React components
const services = await getCollection("services");
const articles = await getCollection("articles");

// Optimize background image
const optimizedBgImage = await getImage({
  src: bgImage,
  format: "webp",
  quality: 85,
  width: 1920,
  height: 1080,
});

// Optimize logos
const optimizedAnnLogo = await getImage({
  src: annLogo,
  format: "webp",
  quality: 100,
  width: 300,
  height: 120,
});

const optimizedSynevoLogo = await getImage({
  src: synevoLogo,
  format: "webp",
  quality: 100,
  width: 250,
  height: 100,
});

// Optimize welcome image
const optimizedWelcomeImage = await getImage({
  src: welcomeImage,
  format: "webp",
  quality: 90,
  width: 600,
  height: 450,
});

// Import service images for homepage - correctly mapped
import medicinaFamilieImg from "../assets/images/servicii/fam-scaled.webp";
import pediatrieImg from "../assets/images/servicii/pediatrrie.webp";
import medicinaInternaImg from "../assets/images/servicii/medicina-interna.webp";
import chirurgieGeneralaImg from "../assets/images/servicii/chirurgie.webp";
import chirurgiePediatricaImg from "../assets/images/servicii/CHIRURGIE-PEDIATRICA.webp";
import obstetricaGinecologieImg from "../assets/images/servicii/ginecologie.webp";
import ortopedieTraumatologieImg from "../assets/images/servicii/orto.webp";
import nefrologieImg from "../assets/images/servicii/nefrologie.webp";
import analizeLaboratorImg from "../assets/images/servicii/medicina-muncii.webp";
import dermatovenerologieImg from "../assets/images/servicii/dermatologie.webp";
import medicinaMunciiImg from "../assets/images/servicii/medicina-muncii.webp";
// Keep existing for other services
import cardiologieImg from "../assets/images/servicii/medicina-interna.webp";
import orlImg from "../assets/images/servicii/nefrologie.webp";
import esteticaImg from "../assets/images/servicii/chirurgie.webp";
import neurologieImg from "../assets/images/servicii/medicina-muncii.webp";
import oftalmologieImg from "../assets/images/servicii/orto.webp";
import urologieImg from "../assets/images/servicii/CHIRURGIE-PEDIATRICA.webp";

// Import coming soon service images
import reumatologieImgSoon from "../assets/images/servicii/soon/reumatologie.webp";
import pneumologieImgSoon from "../assets/images/servicii/soon/pneumologie.webp";
import endocrinologieImgSoon from "../assets/images/servicii/soon/endocrinologie.webp";
import psihiatrieImgSoon from "../assets/images/servicii/soon/psihiatrie.webp";
import recuperareMedicalaImgSoon from "../assets/images/servicii/soon/RECUPERARE-MEDICALA.webp";
import alergologieImgSoon from "../assets/images/servicii/soon/alergologie.webp";
import ortopediePediatricaImgSoon from "../assets/images/servicii/soon/ORTOPEDIE-PEDIATRICA.webp";
// Additional coming soon services (existing services moved to coming soon)
import cardiologieImgSoon from "../assets/images/servicii/soon/cardiologie.webp";
import orlImgSoon from "../assets/images/servicii/soon/ORL.webp";
import oftalmologieImgSoon from "../assets/images/servicii/soon/oftamologie.webp";
import urologieImgSoon from "../assets/images/servicii/soon/UROLOGIE.webp";

// Optimize service images for homepage - new mapping
const medicinaFamilieImage = await getImage({
  src: medicinaFamilieImg,
  format: "webp",
  quality: 85,
  width: 400,
  height: 300,
});

const pediatrieImage = await getImage({
  src: pediatrieImg,
  format: "webp",
  quality: 85,
  width: 400,
  height: 300,
});

const medicinaInternaImage = await getImage({
  src: medicinaInternaImg,
  format: "webp",
  quality: 85,
  width: 400,
  height: 300,
});

const chirurgieGeneralaImage = await getImage({
  src: chirurgieGeneralaImg,
  format: "webp",
  quality: 85,
  width: 400,
  height: 300,
});

const chirurgiePediatricaImage = await getImage({
  src: chirurgiePediatricaImg,
  format: "webp",
  quality: 85,
  width: 400,
  height: 300,
});

const obstetricaGinecologieImage = await getImage({
  src: obstetricaGinecologieImg,
  format: "webp",
  quality: 85,
  width: 400,
  height: 300,
});

const ortopedieTraumatologieImage = await getImage({
  src: ortopedieTraumatologieImg,
  format: "webp",
  quality: 85,
  width: 400,
  height: 300,
});

const nefrologieImage = await getImage({
  src: nefrologieImg,
  format: "webp",
  quality: 85,
  width: 400,
  height: 300,
});

const analizeLaboratorImage = await getImage({
  src: analizeLaboratorImg,
  format: "webp",
  quality: 85,
  width: 400,
  height: 300,
});

const dermatovenerologieImage = await getImage({
  src: dermatovenerologieImg,
  format: "webp",
  quality: 85,
  width: 400,
  height: 300,
});

const medicinaMunciiImage = await getImage({
  src: medicinaMunciiImg,
  format: "webp",
  quality: 85,
  width: 400,
  height: 300,
});

// Keep existing optimized images for other services
const cardiologieImage = await getImage({
  src: cardiologieImg,
  format: "webp",
  quality: 85,
  width: 400,
  height: 300,
});

const orlImage = await getImage({
  src: orlImg,
  format: "webp",
  quality: 85,
  width: 400,
  height: 300,
});

const esteticaImage = await getImage({
  src: esteticaImg,
  format: "webp",
  quality: 85,
  width: 400,
  height: 300,
});

const neurologieImage = await getImage({
  src: neurologieImg,
  format: "webp",
  quality: 85,
  width: 400,
  height: 300,
});

const oftalmologieImage = await getImage({
  src: oftalmologieImg,
  format: "webp",
  quality: 85,
  width: 400,
  height: 300,
});

const urologieImage = await getImage({
  src: urologieImg,
  format: "webp",
  quality: 85,
  width: 400,
  height: 300,
});

// Optimize coming soon service images
const reumatologieImage = await getImage({
  src: reumatologieImgSoon,
  format: "webp",
  quality: 85,
  width: 400,
  height: 300,
});

const pneumologieImage = await getImage({
  src: pneumologieImgSoon,
  format: "webp",
  quality: 85,
  width: 400,
  height: 300,
});

const endocrinologieImage = await getImage({
  src: endocrinologieImgSoon,
  format: "webp",
  quality: 85,
  width: 400,
  height: 300,
});

const psihiatrieImage = await getImage({
  src: psihiatrieImgSoon,
  format: "webp",
  quality: 85,
  width: 400,
  height: 300,
});

const recuperareMedicalaImage = await getImage({
  src: recuperareMedicalaImgSoon,
  format: "webp",
  quality: 85,
  width: 400,
  height: 300,
});

const alergologieImage = await getImage({
  src: alergologieImgSoon,
  format: "webp",
  quality: 85,
  width: 400,
  height: 300,
});

const ortopediePediatricaImage = await getImage({
  src: ortopediePediatricaImgSoon,
  format: "webp",
  quality: 85,
  width: 400,
  height: 300,
});

// Additional coming soon services optimization
const cardiologieComingSoonImage = await getImage({
  src: cardiologieImgSoon,
  format: "webp",
  quality: 85,
  width: 400,
  height: 300,
});

const orlComingSoonImage = await getImage({
  src: orlImgSoon,
  format: "webp",
  quality: 85,
  width: 400,
  height: 300,
});

const oftalmologieComingSoonImage = await getImage({
  src: oftalmologieImgSoon,
  format: "webp",
  quality: 85,
  width: 400,
  height: 300,
});

const urologieComingSoonImage = await getImage({
  src: urologieImgSoon,
  format: "webp",
  quality: 85,
  width: 400,
  height: 300,
});

const homeServiceImages = {
  // New services with correct image mapping
  "medicina-familie": {
    src: medicinaFamilieImage.src,
    width: 400,
    height: 300,
  },
  pediatrie: {
    src: pediatrieImage.src,
    width: 400,
    height: 300,
  },
  "medicina-interna": {
    src: medicinaInternaImage.src,
    width: 400,
    height: 300,
  },
  "chirurgie-generala": {
    src: chirurgieGeneralaImage.src,
    width: 400,
    height: 300,
  },
  "chirurgie-pediatrica": {
    src: chirurgiePediatricaImage.src,
    width: 400,
    height: 300,
  },
  "obstetrica-ginecologie": {
    src: obstetricaGinecologieImage.src,
    width: 400,
    height: 300,
  },
  "ortopedie-traumatologie": {
    src: ortopedieTraumatologieImage.src,
    width: 400,
    height: 300,
  },
  nefrologie: {
    src: nefrologieImage.src,
    width: 400,
    height: 300,
  },
  "analize-laborator": {
    src: analizeLaboratorImage.src,
    width: 400,
    height: 300,
  },
  dermatovenerologie: {
    src: dermatovenerologieImage.src,
    width: 400,
    height: 300,
  },
  "medicina-muncii": {
    src: medicinaMunciiImage.src,
    width: 400,
    height: 300,
  },
  // Existing services for backward compatibility (excluding coming soon services)
  "estetica-faciala": {
    src: esteticaImage.src,
    width: 400,
    height: 300,
  },
  neurologie: {
    src: neurologieImage.src,
    width: 400,
    height: 300,
  },
  // Coming soon services
  reumatologie: {
    src: reumatologieImage.src,
    width: 400,
    height: 300,
  },
  pneumologie: {
    src: pneumologieImage.src,
    width: 400,
    height: 300,
  },
  endocrinologie: {
    src: endocrinologieImage.src,
    width: 400,
    height: 300,
  },
  psihiatrie: {
    src: psihiatrieImage.src,
    width: 400,
    height: 300,
  },
  "recuperare-medicala": {
    src: recuperareMedicalaImage.src,
    width: 400,
    height: 300,
  },
  alergologie: {
    src: alergologieImage.src,
    width: 400,
    height: 300,
  },
  "ortopedie-pediatrica": {
    src: ortopediePediatricaImage.src,
    width: 400,
    height: 300,
  },
  "diabet-metabolism": {
    src: endocrinologieImage.src, // Using endocrinologie image for diabet-metabolism
    width: 400,
    height: 300,
  },
  // Coming soon services that already exist but moved to coming soon
  cardiologie: {
    src: cardiologieComingSoonImage.src,
    width: 400,
    height: 300,
  },
  orl: {
    src: orlComingSoonImage.src,
    width: 400,
    height: 300,
  },
  oftalmologie: {
    src: oftalmologieComingSoonImage.src,
    width: 400,
    height: 300,
  },
  urologie: {
    src: urologieComingSoonImage.src,
    width: 400,
    height: 300,
  },
  default: {
    src: medicinaFamilieImage.src,
    width: 400,
    height: 300,
  },
};
---

<BaseLayout
  title={siteConfig.title}
  description={siteConfig.description}
  keywords={[
    "clinică medicală București",
    "consultații medicale",
    "cardiolog București",
    "dermatolog București",
    "ginecolog București",
  ]}
>
  <!-- Hero Section - React Component -->
  <HeroSection
    backgroundImage={optimizedBgImage.src}
    annLogo={optimizedAnnLogo.src}
    synevoLogo={optimizedSynevoLogo.src}
    client:load
  />

  <!-- Welcome Section - React Component -->
  <WelcomeSection welcomeImage={optimizedWelcomeImage.src} client:load />

  <!-- Services Section - React Component -->
  <ServicesSection
    services={services}
    serviceImages={homeServiceImages}
    backgroundImage={optimizedWelcomeImage.src}
    client:load
  />

  <!-- Coming Soon Section - React Component -->
  <ComingSoonSection
    services={services}
    serviceImages={homeServiceImages}
    backgroundImage={optimizedWelcomeImage.src}
    client:load
  />

  <!-- Articles Section - React Component -->
  <ArticlesSection articles={articles} client:load />
</BaseLayout>
