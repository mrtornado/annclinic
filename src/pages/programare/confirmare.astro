---
import BookingLayout from "../../layouts/BookingLayout.astro";
import { siteConfig } from "../../config/site";

// Extract booking details from URL parameters
const url = new URL(Astro.request.url);
const dateParam = url.searchParams.get("date"); // Format: 19-02-2026+09%3A30+-+10%3A00

// Parse the date parameter
let bookingDate = "";
let bookingTime = "";
let formattedDate = "";

if (dateParam) {
  // Decode URL encoding: replace + with space, decode %3A to :
  const decoded = decodeURIComponent(dateParam.replace(/\+/g, " "));
  // Format: "19-02-2026 09:30 - 10:00"
  const parts = decoded.split(" ");
  
  if (parts.length >= 4) {
    const datePart = parts[0]; // "19-02-2026"
    const timeStart = parts[1]; // "09:30"
    const timeEnd = parts[3]; // "10:00"
    
    // Format date as "Miercuri, 19 Februarie 2026"
    const [day, month, year] = datePart.split("-");
    const dateObj = new Date(parseInt(year), parseInt(month) - 1, parseInt(day));
    
    const weekdays = ["DuminicÄƒ", "Luni", "MarÈ›i", "Miercuri", "Joi", "Vineri", "SÃ¢mbÄƒtÄƒ"];
    const months = [
      "Ianuarie", "Februarie", "Martie", "Aprilie", "Mai", "Iunie",
      "Iulie", "August", "Septembrie", "Octombrie", "Noiembrie", "Decembrie"
    ];
    
    const weekday = weekdays[dateObj.getDay()];
    const monthName = months[dateObj.getMonth()];
    
    formattedDate = `${weekday}, ${day} ${monthName} ${year}`;
    bookingDate = datePart;
    bookingTime = `${timeStart} - ${timeEnd}`;
  }
}

const title = "Programare ConfirmatÄƒ - ANN Medical Clinic";
const description =
  "MulÈ›umim pentru programarea la ANN Medical Clinic. VerificÄƒ emailul pentru detalii È™i codul de confirmare.";

const structuredData = {
  "@context": "https://schema.org",
  "@type": "WebPage",
  name: "Confirmare Programare - ANN Medical Clinic",
  description: description,
  url: `${Astro.site}programare/confirmare`,
  breadcrumb: {
    "@type": "BreadcrumbList",
    itemListElement: [
      {
        "@type": "ListItem",
        position: 1,
        name: "AcasÄƒ",
        item: Astro.site,
      },
      {
        "@type": "ListItem",
        position: 2,
        name: "Programare Online",
        item: `${Astro.site}programare`,
      },
      {
        "@type": "ListItem",
        position: 3,
        name: "Confirmare",
        item: `${Astro.site}programare/confirmare`,
      },
    ],
  },
};

const openGraph = {
  title: "Programare ConfirmatÄƒ - ANN Medical Clinic",
  description:
    "MulÈ›umim pentru programarea la ANN Medical Clinic. VerificÄƒ emailul pentru detalii.",
  image: "/images/ann-clinic-og.jpg",
  imageAlt: "ANN Medical Clinic - Programare ConfirmatÄƒ",
  type: "website",
  url: `${Astro.site}programare/confirmare`,
};
---

<BookingLayout
  title={title}
  description={description}
  canonicalUrl={`${Astro.site}programare/confirmare`}
  structuredData={structuredData}
  openGraph={openGraph}
>
  <div class="min-h-screen bg-gradient-to-br from-teal-50 via-white to-blue-50 pt-32 pb-20">
    <div class="max-w-4xl mx-auto px-4">
      <!-- Success Icon with Animation -->
      <div class="text-center mb-8">
        <div
          class="inline-flex items-center justify-center w-24 h-24 bg-gradient-to-br from-teal-500 to-teal-600 rounded-full shadow-2xl mb-6 animate-bounce"
          style="animation-duration: 1s; animation-iteration-count: 2;"
        >
          <svg
            class="w-12 h-12 text-white"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="3"
              d="M5 13l4 4L19 7"></path>
          </svg>
        </div>

        <h1 class="text-4xl sm:text-5xl font-bold mb-4">
          <span class="block text-gray-900">Programare ConfirmatÄƒ!</span>
          <span
            class="block text-transparent bg-clip-text bg-gradient-to-r from-teal-600 to-blue-600 mt-2"
          >
            MulÈ›umim pentru Ã®ncredere
          </span>
        </h1>

        <p class="text-xl text-gray-600 max-w-2xl mx-auto leading-relaxed">
          Programarea ta a fost confirmatÄƒ cu succes! Te aÈ™teptÄƒm la clinicÄƒ la data È™i ora stabilite.
        </p>
      </div>

      <!-- Booking Details Card -->
      {bookingDate && bookingTime && (
        <div class="bg-gradient-to-br from-teal-600 to-teal-700 rounded-3xl shadow-2xl p-8 sm:p-10 mb-8 text-white">
          <div class="flex items-center gap-3 mb-6">
            <div
              class="w-14 h-14 bg-white/20 rounded-2xl flex items-center justify-center backdrop-blur-sm"
            >
              <span class="text-3xl">ğŸ“…</span>
            </div>
            <h2 class="text-2xl font-bold">Detaliile ProgramÄƒrii Tale</h2>
          </div>

          <div class="grid sm:grid-cols-2 gap-6">
            <!-- Date -->
            <div class="bg-white/10 backdrop-blur-sm rounded-2xl p-6">
              <div class="flex items-center gap-2 mb-2">
                <svg class="w-5 h-5 text-teal-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                </svg>
                <span class="text-sm text-teal-100 font-semibold">Data</span>
              </div>
              <p class="text-2xl font-bold">{formattedDate}</p>
            </div>

            <!-- Time -->
            <div class="bg-white/10 backdrop-blur-sm rounded-2xl p-6">
              <div class="flex items-center gap-2 mb-2">
                <svg class="w-5 h-5 text-teal-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
                <span class="text-sm text-teal-100 font-semibold">Ora</span>
              </div>
              <p class="text-2xl font-bold">{bookingTime}</p>
            </div>
          </div>

          <div class="mt-6 bg-white/10 backdrop-blur-sm rounded-xl p-4 flex items-start gap-3">
            <svg class="w-6 h-6 text-teal-200 flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
            <p class="text-teal-50 text-sm leading-relaxed">
              <strong>Sfat:</strong> FÄƒ o capturÄƒ de ecran sau salveazÄƒ aceastÄƒ paginÄƒ pentru a pÄƒstra detaliile programÄƒrii tale.
            </p>
          </div>
        </div>
      )}

      <!-- Next Steps Card -->
      <div class="bg-white rounded-3xl shadow-xl p-8 sm:p-10 mb-8">
        <div class="flex items-center gap-3 mb-6">
          <div
            class="w-12 h-12 bg-teal-100 rounded-2xl flex items-center justify-center"
          >
            <span class="text-2xl">ğŸ“‹</span>
          </div>
          <h2 class="text-2xl font-bold text-gray-900">Ce urmeazÄƒ?</h2>
        </div>

        <div class="space-y-6">
          <!-- Step 1 -->
          <div class="flex gap-4">
            <div
              class="flex-shrink-0 w-10 h-10 bg-gradient-to-br from-teal-500 to-teal-600 text-white rounded-full flex items-center justify-center font-bold text-lg"
            >
              1
            </div>
            <div class="flex-1">
              <h3 class="font-bold text-lg text-gray-900 mb-1">
                AdaugÄƒ Ã®n calendar
              </h3>
              <p class="text-gray-600">
                {bookingDate && bookingTime ? (
                  <span>SalveazÄƒ programarea ta: <strong>{formattedDate}</strong> la ora <strong>{bookingTime}</strong> Ã®n calendarul telefonului.</span>
                ) : (
                  <span>AdaugÄƒ data È™i ora programÄƒrii Ã®n calendarul tÄƒu pentru a nu uita.</span>
                )}
              </p>
            </div>
          </div>

          <!-- Step 2 -->
          <div class="flex gap-4">
            <div
              class="flex-shrink-0 w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-600 text-white rounded-full flex items-center justify-center font-bold text-lg"
            >
              2
            </div>
            <div class="flex-1">
              <h3 class="font-bold text-lg text-gray-900 mb-1">
                PregÄƒteÈ™te documentele
              </h3>
              <p class="text-gray-600">
                Vino cu <strong>cartea de identitate</strong> È™i, dacÄƒ ai,{" "}
                <strong>analize medicale anterioare</strong> sau{" "}
                <strong>bilet de trimitere</strong>.
              </p>
            </div>
          </div>

          <!-- Step 3 -->
          <div class="flex gap-4">
            <div
              class="flex-shrink-0 w-10 h-10 bg-gradient-to-br from-green-500 to-green-600 text-white rounded-full flex items-center justify-center font-bold text-lg"
            >
              3
            </div>
            <div class="flex-1">
              <h3 class="font-bold text-lg text-gray-900 mb-1">
                PrezintÄƒ-te la clinicÄƒ
              </h3>
              <p class="text-gray-600">
                Vino cu <strong>10-15 minute Ã®nainte</strong> de programare pentru
                completarea fiÈ™ei medicale È™i verificarea documentelor.
              </p>
            </div>
          </div>
        </div>
      </div>

      <!-- Contact & Location Info -->
      <div class="grid sm:grid-cols-2 gap-6 mb-8">
        <!-- Contact Card -->
        <div class="bg-white rounded-2xl shadow-lg p-6">
          <div class="flex items-center gap-3 mb-4">
            <div
              class="w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center"
            >
              <span class="text-2xl">ğŸ“</span>
            </div>
            <h3 class="font-bold text-xl text-gray-900">Contact Rapid</h3>
          </div>
          <div class="space-y-3">
            <a
              href={`tel:${siteConfig.contact.shortPhone}`}
              class="flex items-center gap-3 text-gray-700 hover:text-teal-600 transition-colors"
            >
              <svg
                class="w-5 h-5"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"
                ></path>
              </svg>
              <span class="font-semibold">{siteConfig.contact.shortPhone}</span
              >
            </a>
            <a
              href={`mailto:${siteConfig.contact.email}`}
              class="flex items-center gap-3 text-gray-700 hover:text-teal-600 transition-colors"
            >
              <svg
                class="w-5 h-5"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"
                ></path>
              </svg>
              <span>{siteConfig.contact.email}</span>
            </a>
          </div>
        </div>

        <!-- Location Card -->
        <div class="bg-white rounded-2xl shadow-lg p-6">
          <div class="flex items-center gap-3 mb-4">
            <div
              class="w-12 h-12 bg-teal-100 rounded-xl flex items-center justify-center"
            >
              <span class="text-2xl">ğŸ“</span>
            </div>
            <h3 class="font-bold text-xl text-gray-900">LocaÈ›ia Clinicii</h3>
          </div>
          <div class="space-y-2">
            <p class="text-gray-700">
              {siteConfig.address.street}
              {siteConfig.address.number}
            </p>
            <p class="text-gray-700">
              {siteConfig.address.city}, {siteConfig.address.county}
            </p>
            <a
              href={`https://www.google.com/maps/search/?api=1&query=${siteConfig.address.coordinates.lat},${siteConfig.address.coordinates.lng}`}
              target="_blank"
              rel="noopener noreferrer"
              class="inline-flex items-center gap-2 text-teal-600 hover:text-teal-700 font-semibold mt-2"
            >
              <svg
                class="w-5 h-5"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"
                ></path>
              </svg>
              Deschide Ã®n Google Maps
            </a>
          </div>
        </div>
      </div>

      <!-- Important Notice -->
      <div
        class="bg-gradient-to-r from-amber-50 to-orange-50 border-l-4 border-amber-500 rounded-xl p-6 mb-8"
      >
        <div class="flex gap-4">
          <div class="flex-shrink-0">
            <svg
              class="w-6 h-6 text-amber-600"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"
              ></path>
            </svg>
          </div>
          <div>
            <h3 class="font-bold text-lg text-amber-900 mb-2">
              âš ï¸ InformaÈ›ii importante
            </h3>
            <ul class="space-y-1 text-amber-800">
              <li>
                â€¢ DacÄƒ nu poÈ›i veni la programare, te rugÄƒm sÄƒ <strong>anulezi cu minimum 24h Ã®nainte</strong>
              </li>
              <li>
                â€¢ Pentru Ã®ntÃ¢rzieri mai mari de 15 minute, programarea poate fi reprogramatÄƒ
              </li>
              <li>
                â€¢ Pentru Ã®ntrebÄƒri, modificÄƒri sau anulÄƒri, sunÄƒ-ne la <strong>{siteConfig.contact.shortPhone}</strong>
              </li>
            </ul>
          </div>
        </div>
      </div>

      <!-- Action Buttons -->
      <div class="flex flex-col sm:flex-row gap-4 justify-center">
        <a
          href="/"
          class="inline-flex items-center justify-center gap-2 bg-gradient-to-r from-teal-600 to-teal-700 text-white font-bold px-8 py-4 rounded-2xl hover:from-teal-700 hover:to-teal-800 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-1"
        >
          <svg
            class="w-5 h-5"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"
            ></path>
          </svg>
          Ãnapoi la Pagina PrincipalÄƒ
        </a>

        <a
          href="/servicii"
          class="inline-flex items-center justify-center gap-2 bg-white text-teal-600 font-bold px-8 py-4 rounded-2xl hover:bg-gray-50 transition-all duration-300 shadow-lg hover:shadow-xl border-2 border-teal-600"
        >
          <svg
            class="w-5 h-5"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"
            ></path>
          </svg>
          Vezi Toate Serviciile
        </a>
      </div>
    </div>
  </div>
</BookingLayout>
